<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Webpack App</title>
        <style>
          
        </style>
    </head>
    <body>
      <div id="root"></div>
      
      
      <script>
        window.customElements.whenDefined('user-card').then(() => {
          const userCardSelectorAll = document.querySelectorAll('user-card');
          userCardSelectorAll.forEach((userCardSelector) => {
            if (userCardSelector.shadowRoot) {
              let showInfo = true;
              const toggleInfo = () => {
                showInfo = !showInfo;
                const info = userCardSelector.shadowRoot.querySelector('.info');
                const toggleBtn = userCardSelector.shadowRoot.querySelector('#toggle-info');

                if (showInfo) {
                  info.style.display = 'block';
                  toggleBtn.innerText = 'Hide Info';
                } else {
                  info.style.display = 'none';
                  toggleBtn.innerText = 'Show Info';
                }

                toggleBtn.dispatchEvent(new CustomEvent("clicked", {
                    detail: `${userCardSelector.shadowRoot.querySelector('h3').innerText} : I am clicked`
                }));
              }

              userCardSelector.shadowRoot.querySelector('#toggle-info').addEventListener('click', () => toggleInfo());
              userCardSelector.shadowRoot.querySelector('#toggle-info').addEventListener('clicked', (evt) => {
                console.log(evt.detail);
              });
              // userCardSelector.shadowRoot.querySelector('#toggle-info').removeEventListener('click', null);
            }
          });
        });
      </script>
    </body>
</html>
